(function(m,i,j){i.infinitescroll=function x(A,C,B){this.element=i(B);this._create(A,C)};i.infinitescroll.defaults={callback:function(){},debug:false,behavior:j,binder:i(m),nextSelector:"div.navigation a:first",loadMsgSelector:null,loadingMsgRevealSpeed:"fast",loadingImg:"https://sites.google.com/site/puddingchen35/blogger-image/loading.gif",loadingText:"<em>Loading the next set of posts...</em>",loadingStart:j,loadingEnd:j,donetext:"<em>Congratulations, you've reached the end of the internet.</em>",navSelector:"div.navigation",contentSelector:null,extraScrollPx:150,itemSelector:"div.post",animate:false,pathParse:j,dataType:"html",appendCallback:true,bufferPx:40,orientation:"height",errorCallback:function(){},currPage:1,infid:0,isDuringAjax:false,isInvalidPage:false,isDestroyed:false,isDone:false,isPaused:false,pixelsFromNavToBottom:j,pagesLoaded:null,path:j,loadingMsg:j};i.infinitescroll.prototype={_binding:function g(B){var A=this;if(B!=="bind"&&B!=="unbind"){this._debug("Binding value  "+B+" not valid");return false}if(B=="unbind"){(this.options.binder).unbind("smartscroll.infscr."+A.options.infid)}else{(this.options.binder)[B]("smartscroll.infscr."+A.options.infid,function(){A.scroll()})}this._debug("Binding",B)},_create:function r(A,F){if(!this._validate(A)){return false}var C=this.options=i.extend({},i.infinitescroll.defaults,A),E=/(.*?\/\/).*?(\/.*)/,D=this._get_next_path();C.contentSelector=C.contentSelector||this.element;C.loadMsgSelector=C.loadMsgSelector||C.contentSelector;if(!D){this._debug("Navigation selector not found");return}C.path=this._determinepath(D);C.loadingMsg=i('<div id="infscr-loading" style="text-align:center;"><img alt="Loading..." src="'+C.loadingImg+'" /><div><a class="loading-msg" href="">'+C.loadingText+"</a></div></div>");var B=this;C.setupLoadingMsgLink=function(){var G=B._get_next_path();if(G.length>0&&typeof(C.loadingMsg)!="undefined"){C.loadingMsg.find(".loading-msg").attr("href",G[0])}};C.setupLoadingMsgLink();(new Image()).src=C.loadingImg;C.pixelsFromNavToBottom=i(document).height()-i(C.navSelector).offset().top;C.loadingStart=C.loadingStart||function(){i(C.navSelector).hide();C.loadingMsg.appendTo(C.loadMsgSelector).show(C.loadingMsgRevealSpeed,function(){C.setupLoadingMsgLink();beginAjax(C)})};C.loadingEnd=C.loadingEnd||function(){C.loadingMsg.fadeOut("normal")};C.callback=F||function(){};this._setup()},_debug:function o(){if(this.options.debug){return m.console&&console.log.call(console,arguments)}},_determinepath:function y(B){return this._get_next_path();var A=this.options;if(i.isFunction(A.pathParse)){this._debug("pathParse");return[B]}else{if(B.match(/^(.*?)\b2\b(.*?$)/)){B=B.match(/^(.*?)\b2\b(.*?$)/).slice(1)}else{if(B.match(/^(.*?)2(.*?$)/)){if(B.match(/^(.*?page=)2(\/.*|$)/)){B=B.match(/^(.*?page=)2(\/.*|$)/).slice(1);return B}B=B.match(/^(.*?)2(.*?$)/).slice(1)}else{if(B.match(/^(.*?page=)1(\/.*|$)/)){B=B.match(/^(.*?page=)1(\/.*|$)/).slice(1);return B}else{this._debug("Sorry, we couldn't parse your Next (Previous Posts) URL. Verify your the css selector points to the correct A tag. If you still get this error: yell, scream, and kindly ask for help at infinite-scroll.com.");A.isInvalidPage=true}}}}this._debug("determinePath",B);return B},_error:function t(B){var A=this.options;if(B!=="destroy"&&B!=="end"){B="unknown"}this._debug("Error",B);if(B=="end"){this._showdonemsg()}A.isDone=true;A.currPage=1;A.isPaused=false;this.binding("unbind")},_loadcallback:function c(E,F){var D=this.options,H=this.options.callback,A=(D.isDone)?"done":(!D.appendCallback)?"no-append":"append",G;switch(A){case"done":this._showdonemsg();return false;break;case"no-append":if(D.dataType=="html"){F="<div>"+F+"</div>";F=i(F).find(D.itemSelector)}break;case"append":var C=E.children();if(C.length==0){return this._error("end")}G=document.createDocumentFragment();while(E[0].firstChild){G.appendChild(E[0].firstChild)}this._debug("contentSelector",i(D.contentSelector)[0]);i(D.contentSelector)[0].appendChild(G);F=C.get();break}D.loadingEnd.call(i(D.contentSelector)[0],D);if(D.animate){var B=i(m).scrollTop()+i("#infscr-loading").height()+D.extraScrollPx+"px";i("html,body").animate({scrollTop:B},800,function(){D.isDuringAjax=false})}if(!D.animate){D.isDuringAjax=false}H.call(i(D.contentSelector)[0],F)},_nearbottom:function s(){var B=this.options,A=0+i(document).height()-(B.binder.scrollTop())-i(m).height();this._debug("math:",A,B.pixelsFromNavToBottom);return(A-B.bufferPx<B.pixelsFromNavToBottom)},_pausing:function k(B){var A=this.options;if(B!=="pause"&&B!=="resume"&&B!==null){this._debug("Invalid argument. Toggling pause value instead")}B=(B&&(B=="pause"||B=="resume"))?B:"toggle";switch(B){case"pause":A.isPaused=true;break;case"resume":A.isPaused=false;break;case"toggle":A.isPaused=!A.isPaused;break}this._debug("Paused",A.isPaused);return false},_setup:function p(){var A=this.options;(!A.behavior)?this._binding("bind"):this["_setup_"+A.behavior]();return false},_showdonemsg:function a(){var A=this.options;A.loadingMsg.find("img").hide().parent().find("div").html(A.donetext).animate({opacity:1},2000,function(){i(this).parent().slideUp("normal")});A.errorCallback.call(i(A.contentSelector)[0],"done")},_validate:function u(B){for(var A in B){if(A.indexOf&&A.indexOf("Selector")>-1&&i(B[A]).length===0){this._debug("Your "+A+" found no elements.");return false}return true}},_get_next_path:function(){var A=this.options;var B=i(A.nextSelector);var C=B.attr("href");C=[C];return C},bind:function n(){this._binding("bind")},destroy:function z(){this.options.isDestroyed=true;return this._error("destroy")},pause:function e(){this._pausing("pause")},resume:function h(){this._pausing("resume")},retrieve:function b(G){var H=this,B=H.options,J=this._get_next_path(),D,I,K,A,C,G=G||null,F=(!!G)?G:B.currPage;beginAjax=function E(L){L.currPage++;H._debug("heading into ajax",J);D=i(L.contentSelector).is("table")?i("<tbody/>"):i("<div/>");K=(i.isFunction(L.pathParse))?L.pathParse(J.join("2"),L.currPage):J.join(L.currPage);A=(L.dataType=="html"||L.dataType=="json")?L.dataType:"html+callback";if(L.appendCallback&&L.dataType=="html"){A+="+callback"}switch(A){case"html+callback":H._debug("Using HTML via .load() method");D.load(K+" "+L.itemSelector,null,function M(N){H._loadcallback(D,N)});break;case"html":case"json":H._debug("Using "+(A.toUpperCase())+" via $.ajax() method");i.ajax({url:K,dataType:L.dataType,complete:function M(N,O){C=(typeof(N.isResolved)!=="undefined")?(N.isResolved()):(O==="success"||O==="notmodified");(C)?H._loadcallback(D,N.responseText):H._error("end")}});break}};if(B.isDestroyed){this._debug("Instance is destroyed");return false}B.isDuringAjax=true;B.loadingStart.call(i(B.contentSelector)[0],B)},scroll:function f(){var A=this.options;if(A.isDuringAjax||A.isInvalidPage||A.isDone||A.isDestroyed||A.isPaused){return}if(!this._nearbottom()){return}this.retrieve()},toggle:function w(){this._pausing()},unbind:function l(){this._binding("unbind")}};i.fn.infinitescroll=function d(C,D){var B=typeof C;switch(B){case"string":var A=Array.prototype.slice.call(arguments,1);this.each(function(){var E=i.data(this,"infinitescroll");if(!E){return false}if(!i.isFunction(E[C])||C.charAt(0)==="_"){return false}E[C].apply(E,A)});break;case"object":this.each(function(){var E=i.data(this,"infinitescroll");if(E){}else{i.data(this,"infinitescroll",new i.infinitescroll(C,D,this))}});break}return this};var v=i.event,q;v.special.smartscroll={setup:function(){i(this).bind("scroll",v.special.smartscroll.handler)},teardown:function(){i(this).unbind("scroll",v.special.smartscroll.handler)},handler:function(D,A){var C=this,B=arguments;D.type="smartscroll";if(q){clearTimeout(q)}q=setTimeout(function(){jQuery.event.handle.apply(C,B)},A==="execAsap"?0:100)}};i.fn.smartscroll=function(A){return A?this.bind("smartscroll",A):this.trigger("smartscroll",["execAsap"])}})(window,jQuery);