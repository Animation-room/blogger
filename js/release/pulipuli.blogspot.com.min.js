/**
 * pulipuli.blogspot.com.min.js
 * 
 * JavaScript for http://pulipuli.blogspot.tw
 *
 * Include files: jquery.lazyload.min.js, jquery.blogger.infinitescroll.min.js, blogger.js, puli.post.toc.js, puliBloggerDigest.js, jquery.qrcode.js, qrcode.js, puliQRCode.js
 * Minify JavaScript: http://localhost/blogger/js/release/minify_js.php
 */
(function($){$.fn.lazyload=function(options){var settings={threshold:0,failurelimit:0,event:"scroll",effect:"show",container:window};if(options)$.extend(settings,options);var elements=this;if("scroll"==settings.event)$(settings.container).bind("scroll",function(event){var counter=0;elements.each(function(){if($.abovethetop(this,settings)||$.leftofbegin(this,settings));else if(!$.belowthefold(this,settings)&&!$.rightoffold(this,settings)){$(this).trigger("appear")}else if(counter++>settings.failurelimit)return false});var temp=$.grep(elements,function(element){return!element.loaded});elements=$(temp)});this.each(function(){var self=this;if(undefined==$(self).attr("original"))$(self).attr("original",$(self).attr("src"));if("scroll"!=settings.event||undefined==$(self).attr("src")||settings.placeholder==$(self).attr("src")||($.abovethetop(self,settings)||$.leftofbegin(self,settings)||$.belowthefold(self,settings)||$.rightoffold(self,settings))){if(settings.placeholder){$(self).attr("src",settings.placeholder)}else $(self).removeAttr("src");self.loaded=false}else self.loaded=true;$(self).one("appear",function(){if(!this.loaded)$("<img />").bind("load",function(){$(self).hide().attr("src",$(self).attr("original"))[settings.effect](settings.effectspeed);self.loaded=true}).attr("src",$(self).attr("original"))});if("scroll"!=settings.event)$(self).bind(settings.event,function(event){if(!self.loaded)$(self).trigger("appear")})});$(settings.container).trigger(settings.event);return this};$.belowthefold=function(element,settings){if(settings.container===undefined||settings.container===window){var fold=$(window).height()+$(window).scrollTop()}else fold=$(settings.container).offset().top+$(settings.container).height();return fold<=$(element).offset().top-settings.threshold};$.rightoffold=function(element,settings){if(settings.container===undefined||settings.container===window){var fold=$(window).width()+$(window).scrollLeft()}else fold=$(settings.container).offset().left+$(settings.container).width();return fold<=$(element).offset().left-settings.threshold};$.abovethetop=function(element,settings){if(settings.container===undefined||settings.container===window){var fold=$(window).scrollTop()}else fold=$(settings.container).offset().top;return fold>=$(element).offset().top+settings.threshold+$(element).height()};$.leftofbegin=function(element,settings){if(settings.container===undefined||settings.container===window){var fold=$(window).scrollLeft()}else fold=$(settings.container).offset().left;return fold>=$(element).offset().left+settings.threshold+$(element).width()};$.extend($.expr[':'],{"below-the-fold":"$.belowthefold(a, {threshold : 0, container: window})","above-the-fold":"!$.belowthefold(a, {threshold : 0, container: window})","right-of-fold":"$.rightoffold(a, {threshold : 0, container: window})","left-of-fold":"!$.rightoffold(a, {threshold : 0, container: window})"})})(jQuery);(function(m,i,j){i.infinitescroll=function x(A,C,B){this.element=i(B);this._create(A,C)};i.infinitescroll.defaults={callback:function(){},debug:false,behavior:j,binder:i(m),nextSelector:"div.navigation a:first",loadMsgSelector:null,loadingMsgRevealSpeed:"fast",loadingImg:"https://sites.google.com/site/puddingchen35/blogger-image/loading.gif",loadingText:"<em>Loading the next set of posts...</em>",loadingStart:j,loadingEnd:j,donetext:"<em>Congratulations, you've reached the end of the internet.</em>",navSelector:"div.navigation",contentSelector:null,extraScrollPx:150,itemSelector:"div.post",animate:false,pathParse:j,dataType:"html",appendCallback:true,bufferPx:40,orientation:"height",errorCallback:function(){},currPage:1,infid:0,isDuringAjax:false,isInvalidPage:false,isDestroyed:false,isDone:false,isPaused:false,pixelsFromNavToBottom:j,pagesLoaded:null,path:j,loadingMsg:j};i.infinitescroll.prototype={_binding:function g(B){var A=this;if(B!=="bind"&&B!=="unbind"){this._debug("Binding value  "+B+" not valid");return false};if(B=="unbind"){(this.options.binder).unbind("smartscroll.infscr."+A.options.infid)}else (this.options.binder)[B]("smartscroll.infscr."+A.options.infid,function(){A.scroll()});this._debug("Binding",B)},_create:function r(A,F){if(!this._validate(A))return false;var C=this.options=i.extend({},i.infinitescroll.defaults,A),E=/(.*?\/\/).*?(\/.*)/,D=this._get_next_path();C.contentSelector=C.contentSelector||this.element;C.loadMsgSelector=C.loadMsgSelector||C.contentSelector;if(!D){this._debug("Navigation selector not found");return};C.path=this._determinepath(D);C.loadingMsg=i('<div id="infscr-loading" style="text-align:center;"><img alt="Loading..." src="'+C.loadingImg+'" /><div><a class="loading-msg" href="">'+C.loadingText+"</a></div></div>");var B=this;C.setupLoadingMsgLink=function(){var G=B._get_next_path();if(G.length>0&&typeof(C.loadingMsg)!="undefined")C.loadingMsg.find(".loading-msg").attr("href",G[0])};C.setupLoadingMsgLink();(new Image()).src=C.loadingImg;C.pixelsFromNavToBottom=i(document).height()-i(C.navSelector).offset().top;C.loadingStart=C.loadingStart||function(){i(C.navSelector).hide();C.loadingMsg.appendTo(C.loadMsgSelector).show(C.loadingMsgRevealSpeed,function(){C.setupLoadingMsgLink();beginAjax(C)})};C.loadingEnd=C.loadingEnd||function(){C.loadingMsg.fadeOut("normal")};C.callback=F||function(){};this._setup()},_debug:function o(){if(this.options.debug)return m.console&&console.log.call(console,arguments)},_determinepath:function y(B){return this._get_next_path();var A=this.options;if(i.isFunction(A.pathParse)){this._debug("pathParse");return[B]}else if(B.match(/^(.*?)\b2\b(.*?$)/)){B=B.match(/^(.*?)\b2\b(.*?$)/).slice(1)}else if(B.match(/^(.*?)2(.*?$)/)){if(B.match(/^(.*?page=)2(\/.*|$)/)){B=B.match(/^(.*?page=)2(\/.*|$)/).slice(1);return B};B=B.match(/^(.*?)2(.*?$)/).slice(1)}else if(B.match(/^(.*?page=)1(\/.*|$)/)){B=B.match(/^(.*?page=)1(\/.*|$)/).slice(1);return B}else{this._debug("Sorry, we couldn't parse your Next (Previous Posts) URL. Verify your the css selector points to the correct A tag. If you still get this error: yell, scream, and kindly ask for help at infinite-scroll.com.");A.isInvalidPage=true};this._debug("determinePath",B);return B},_error:function t(B){var A=this.options;if(B!=="destroy"&&B!=="end")B="unknown";this._debug("Error",B);if(B=="end")this._showdonemsg();A.isDone=true;A.currPage=1;A.isPaused=false;this.binding("unbind")},_loadcallback:function c(E,F){var D=this.options,H=this.options.callback,A=(D.isDone)?"done":(!D.appendCallback)?"no-append":"append",G;switch(A){case"done":this._showdonemsg();return false;break;case"no-append":if(D.dataType=="html"){F="<div>"+F+"</div>";F=i(F).find(D.itemSelector)};break;case"append":var C=E.children();if(C.length==0)return this._error("end");G=document.createDocumentFragment();while(E[0].firstChild)G.appendChild(E[0].firstChild);this._debug("contentSelector",i(D.contentSelector)[0]);i(D.contentSelector)[0].appendChild(G);F=C.get();break};D.loadingEnd.call(i(D.contentSelector)[0],D);if(D.animate){var B=i(m).scrollTop()+i("#infscr-loading").height()+D.extraScrollPx+"px";i("html,body").animate({scrollTop:B},800,function(){D.isDuringAjax=false})};if(!D.animate)D.isDuringAjax=false;H.call(i(D.contentSelector)[0],F)},_nearbottom:function s(){var B=this.options,A=0+i(document).height()-(B.binder.scrollTop())-i(m).height();this._debug("math:",A,B.pixelsFromNavToBottom);return(A-B.bufferPx<B.pixelsFromNavToBottom)},_pausing:function k(B){var A=this.options;if(B!=="pause"&&B!=="resume"&&B!==null)this._debug("Invalid argument. Toggling pause value instead");B=(B&&(B=="pause"||B=="resume"))?B:"toggle";switch(B){case"pause":A.isPaused=true;break;case"resume":A.isPaused=false;break;case"toggle":A.isPaused=!A.isPaused;break};this._debug("Paused",A.isPaused);return false},_setup:function p(){var A=this.options;(!A.behavior)?this._binding("bind"):this["_setup_"+A.behavior]();return false},_showdonemsg:function a(){var A=this.options;A.loadingMsg.find("img").hide().parent().find("div").html(A.donetext).animate({opacity:1},2e3,function(){i(this).parent().slideUp("normal")});A.errorCallback.call(i(A.contentSelector)[0],"done")},_validate:function u(B){for(var A in B){if(A.indexOf&&A.indexOf("Selector")>-1&&i(B[A]).length===0){this._debug("Your "+A+" found no elements.");return false};return true}},_get_next_path:function(){var A=this.options,B=i(A.nextSelector),C=B.attr("href");C=[C];return C},bind:function n(){this._binding("bind")},destroy:function z(){this.options.isDestroyed=true;return this._error("destroy")},pause:function e(){this._pausing("pause")},resume:function h(){this._pausing("resume")},retrieve:function b(G){var H=this,B=H.options,J=this._get_next_path(),D,I,K,A,C,G=G||null,F=(!!G)?G:B.currPage;beginAjax=function E(L){L.currPage++;H._debug("heading into ajax",J);D=i(L.contentSelector).is("table")?i("<tbody/>"):i("<div/>");K=(i.isFunction(L.pathParse))?L.pathParse(J.join("2"),L.currPage):J.join(L.currPage);A=(L.dataType=="html"||L.dataType=="json")?L.dataType:"html+callback";if(L.appendCallback&&L.dataType=="html")A+="+callback";switch(A){case"html+callback":H._debug("Using HTML via .load() method");D.load(K+" "+L.itemSelector,null,function M(N){H._loadcallback(D,N)});break;case"html":case"json":H._debug("Using "+(A.toUpperCase())+" via $.ajax() method");i.ajax({url:K,dataType:L.dataType,complete:function M(N,O){C=(typeof(N.isResolved)!=="undefined")?(N.isResolved()):(O==="success"||O==="notmodified");C?H._loadcallback(D,N.responseText):H._error("end")}});break}};if(B.isDestroyed){this._debug("Instance is destroyed");return false};B.isDuringAjax=true;B.loadingStart.call(i(B.contentSelector)[0],B)},scroll:function f(){var A=this.options;if(A.isDuringAjax||A.isInvalidPage||A.isDone||A.isDestroyed||A.isPaused)return;if(!this._nearbottom())return;this.retrieve()},toggle:function w(){this._pausing()},unbind:function l(){this._binding("unbind")}};i.fn.infinitescroll=function d(C,D){var B=typeof C;switch(B){case"string":var A=Array.prototype.slice.call(arguments,1);this.each(function(){var E=i.data(this,"infinitescroll");if(!E)return false;if(!i.isFunction(E[C])||C.charAt(0)==="_")return false;E[C].apply(E,A)});break;case"object":this.each(function(){var E=i.data(this,"infinitescroll");if(E);else i.data(this,"infinitescroll",new i.infinitescroll(C,D,this))});break};return this};var v=i.event,q;v.special.smartscroll={setup:function(){i(this).bind("scroll",v.special.smartscroll.handler)},teardown:function(){i(this).unbind("scroll",v.special.smartscroll.handler)},handler:function(D,A){var C=this,B=arguments;D.type="smartscroll";if(q)clearTimeout(q);q=setTimeout(function(){jQuery.event.handle.apply(C,B)},A==="execAsap"?0:100)}};i.fn.smartscroll=function(A){return A?this.bind("smartscroll",A):this.trigger("smartscroll",["execAsap"])}})(window,jQuery);if(typeof PULI_UTILS=="undefined")PULI_UTILS={};PULI_UTILS.log=function(_title,_message){if(_message===undefined){_message=_title;_title=null};if(_title!==null)_message="["+_title+"] "+_message;_message="[PULIPULI] "+_message;console.log(_message)};PULI_UTILS.is_blogger_fullpage=function(){var href_array=location.href.split("/"),_is_fulllpage=(href_array.length>5&&href_array[4]!="label"),_is_file=href_array[0]!="file:",_is_localhost=(href_array[2]=='localhost'),_is_localhost_fullpage=(href_array[href_array.length-1]=='fullpage.html');if(_is_localhost)if(_is_localhost_fullpage){return true}else return false;if(_is_fulllpage&&_is_file){return true}else return false};var linkwithin_site_id=226251
function digest_show(id){if(document.getElementById(id+"-show").style.display===""||document.getElementById(id+"-show").style.display=="block"){jQuery("#"+id+"-show").hide();jQuery("#"+id+"-hidden").show()}else{jQuery("#"+id+"-hidden").hide();jQuery("#"+id+"-show").show();document.getElementById(id+"-show").parentNode.parentNode.scrollIntoView(true)};return false}
function sidebar_control(mode){if(jQuery("#main").css("display")!="none"&&jQuery("#sidebar-wrapper").css("display")!="none"){if(mode===0){mode="max"}else if(mode==1)mode="hidden"}else if(mode===0&&jQuery("#main").css("display")!="none"){mode="normal"}else if(mode==1&&jQuery("#sidebar-wrapper").css("display")!="none"){mode="normal"}else return;var normal_left="65%",normal_right="30%",max_length="97%",min_length="0%",mainID="#main";jQuery(mainID).show();jQuery("#sidebar-wrapper").show();if(mode=='normal'){jQuery("#sidebar-wrapper").animate({width:normal_right},500);jQuery(mainID).animate({width:normal_left},500)}else if(mode=='hidden'){jQuery("#sidebar-wrapper").animate({width:min_length},500,"linear",function(){jQuery("#sidebar-wrapper").hide()});jQuery(mainID).animate({width:max_length},500)}else if(mode=='max'){jQuery(mainID).animate({width:min_length},500,"linear",function(){jQuery(mainID).hide()});jQuery("#sidebar-wrapper").animate({width:max_length},500,"linear")}}
function is_blogger_search(){return((location.href.indexOf(".blogspot.com/search?")>-1)||(location.href.indexOf(".blogspot.com/search/")>-1))}
function is_blogger_label(){return(location.href.indexOf(".blogspot.com/search/label/")>-1)}
function is_blogger_archive(){var needle="_archive.html",url=location.href;return(url.substring(url.length-needle.length,url.length)==needle)}
function generateBreadcrumbs(outputSlt){if(PULI_UTILS.is_blogger_fullpage()===false)return"";var strHref=location.href.toLowerCase(),intWhereAt=strHref.lastIndexOf('/',strHref.indexOf('.html')),intYear=parseInt(strHref.substr(intWhereAt-7,4),10),homepage='<a href="'+jQuery("h1.title a").attr("href")+'">首頁</a>',strCrumbOutput=homepage+' &gt; <a href="/search?updated-min='+intYear;strCrumbOutput+='-01-01T00%3A00%3A00-08%3A00&updated-max='+(intYear+1);strCrumbOutput+='-01-01T00%3A00%3A00-08%3A00">'+intYear+'年</a>';var intMonth=strHref.substr(intWhereAt-2,2);if(intMonth.substr(0,1)=='0')intMonth=intMonth.substr(1,1);intMonth=parseInt(intMonth,10);var intNextMonthYear=intYear,intNextMonth=intMonth+1;if(intNextMonth>11){intNextMonth=1;intNextMonthYear+=1};var strMonth=intMonth;if(intMonth<10)strMonth="0"+intMonth;var strNextMonth=intNextMonth;if(intNextMonth<10)strNextMonth="0"+intNextMonth;strCrumbOutput+=' &gt; <a href="/search?updated-min='+intYear;strCrumbOutput+='-'+strMonth+'-01T00%3A00%3A00-08%3A00&updated-max='+intNextMonthYear;strCrumbOutput+='-'+strNextMonth+'-01T00%3A00%3A00-08%3A00">'+strMonth+'月</a>';return"<span class='breadcrumbs'>"+strCrumbOutput+"</span>"}
function RemoveDuplicatedPosts(PostUrl){function contains(a,e){for(var j=0;j<a.length;j++)if(a[j]==e)return true;return false};var tmpUrls=[],tmpTitles=[],tmpDates=[];for(var i=0;i<relatedUrls.length;i++)if(!contains(tmpUrls,relatedUrls[i])&&PostUrl!=relatedUrls[i]){tmpUrls.length+=1;tmpUrls[tmpUrls.length-1]=relatedUrls[i];tmpTitles.length+=1;tmpTitles[tmpTitles.length-1]=relatedTitles[i];tmpDates.length+=1;tmpDates[tmpDates.length-1]=relatedDates[i]};relatedTitles=tmpTitles;relatedUrls=tmpUrls;relatedDates=tmpDates}
function RelatedLabels(json){if(typeof(json.feed.entry)=="undefined"||json.feed.entry===null)return;for(var i=0;i<json.feed.entry.length;i++){var entry=json.feed.entry[i];relatedTitles[relatedPostsNum]=entry.title.$t;relatedDates[relatedPostsNum]=entry.published.$t.substr(0,10);for(var j=0;j<entry.link.length;j++)if(entry.link[j].rel=='alternate'){relatedUrls[relatedPostsNum]=entry.link[j].href;relatedPostsNum++;break}}}
function ShowRelatedPosts(PostUrl){RemoveDuplicatedPosts(PostUrl);var r=Math.floor((relatedTitles.length-1)*Math.random()),i=0,output="";if(relatedTitles.length>0){output='<div style="margin-top: 1em;">相關連結: <ul>';while(i<relatedTitles.length&&i<5){output=output+'<li><a href="'+relatedUrls[r]+'">'+relatedTitles[r]+'</a> - '+relatedDates[r]+'</li>';if(r<relatedTitles.length-1){r++}else r=0;i++};output=output+'</ul></div>'};return output}
function compareentry(a,b){order=Date.parse(a.published.$t.replace(/^(\d{4})-(\d{2})-(\d{2})T([0-9:]*)([.0-9]*)(.)(.*)$/,'$1/$2/$3 $4 GMT'))-Date.parse(b.published.$t.replace(/^(\d{4})-(\d{2})-(\d{2})T([0-9:]*)([.0-9]*)(.)(.*)$/,'$1/$2/$3 $4 GMT'));return 0-order}
function handlePostspulipuli(json){if(document.getElementById("newpostspulipuli")===null)return;var title='<h2></h2>';if(title=='<h2></h2>')title='';var temp=title+'<ul id="Feed001_feedItemListDisplay">',postshow=10,titlelen='',layout="%timestamp%<br/>%title%";try{var sortentry=json.feed.entry.sort(compareentry)}catch(e){};for(var i=0,post;i<postshow;i++){post=sortentry[i];if(i>=postshow)break;title=post.title.$t;if(titlelen!==""&&title.length>titlelen)title=title.substr(0,titlelen)+"...";var link=post.link[4].href,summary=post.summary.$t,tmp=summary.split('"');summary=tmp.join('&quot;');tmp=summary.split('<br />');summary=tmp.join('&nbsp;');tmp=summary.split('<');summary=tmp.join('&lt;');tmp=summary.split('>');summary=tmp.join('&gt;');var title_link='<a href="'+link+'" title="'+summary+'">'+title+'</a>',authorname=post.author[0].name.$t,timestamp=post.published.$t.substr(0,10),layout_replace=layout.replace("%title%",title_link).replace("%timestamp%",timestamp).replace("%authorname%",authorname);temp+='<li><span class="item-title">'+layout_replace+'</span></li>'};temp+="</ul>";document.getElementById("newpostspulipuli").innerHTML=temp}
function handleCommentspulipuli(json){if(document.getElementById("newcommentspulipuli")===null)return;var temp='<ul id="Feedpulipuli_feedItemListDisplay">',postshow=10,titlelen='20',layout="%Y%-%M%-%D% %authorname%<br/>%comment%";try{var sortentry=json.feed.entry.sort(compareentry)}catch(e){};for(var i=0,post;i<postshow;i++){post=sortentry[i];if(i>=postshow)break;var fulltitle=post.content.$t;fulltitle=fulltitle.replace("\u003CBR/\u003E","\n");var tmp=fulltitle.split('<br />');fulltitle=tmp.join('&nbsp;\n');tmp=fulltitle.split('<br/>');fulltitle=tmp.join('&nbsp;\n');tmp=fulltitle.split('<br>');fulltitle=tmp.join('&nbsp;\n');tmp=fulltitle.split('"');fulltitle=tmp.join('&quot;');tmp=fulltitle.split('<');fulltitle=tmp.join('&lt;');tmp=fulltitle.split('>');fulltitle=tmp.join('&gt;');var title=fulltitle;tmp=title.split('&nbsp;');title=tmp.join(' ');if(titlelen!==""&&title.length>titlelen)title=title.substr(0,titlelen)+"...";var title_temp="";for(var j=0;j<title.length;j++){var temp_char=title.substr(j,1);if(temp_char=="<"){var temp_j=title.indexOf(">",j);if(temp_j!=-1)j=temp_j;continue}else title_temp=title_temp+temp_char};title=title_temp;var link=post.link[2].href,title_link='<a href="'+link+'" title="'+fulltitle+'">'+title+'</a>',authorname=post.author[0].name.$t,timestamp=post.published.$t.substr(0,10),y=timestamp.substr(0,4),m=timestamp.substr(5,2),d=timestamp.substr(8,2),layout_replace=layout.replace("%comment%",title_link).replace("%Y%",y).replace("%M%",m).replace("%D%",d).replace("%authorname%",authorname);temp+='<li><span class="item-title">'+layout_replace+'</span></li>'};temp+="</ul>";document.getElementById("newcommentspulipuli").innerHTML=temp}
function handleGuestbookPulipuli(json){if(document.getElementById("pulipuli_guestbook")===null)return;document.getElementById("pulipuli_guestbook").innerHTML='';var temp='<ul id="Feedpulipuli_guestbookDisplay">',postshow=20,titlelen='20',layout="<span class='date'>%Y%-%M%-%D%</span> <strong>%authorname%</strong>: %comment%";try{var sortentry=json.feed.entry.sort(compareentry)}catch(e){};var firstPost=null;for(var i=0,post;i<postshow;i++){post=sortentry[i];if(i===0)firstPost=post;if(i>=postshow)break;var title=post.content.$t,fulltitle=title.replace("\u003CBR/\u003E","<br />\n"),title_temp="";for(var j=0;j<title.length;j++){var temp_char=title.substr(j,1);if(temp_char=="<"){var temp_j=title.indexOf(">",j);if(temp_j!=-1)j=temp_j;continue}else title_temp=title_temp+temp_char};title=title_temp;var link="";if(typeof(post.link[2])!="undefined")link=post.link[2].href;var title_link=fulltitle,authorname=post.author[0].name.$t;if(authorname=='Anonymous')authorname='匿名';if(authorname=='布丁布丁吃布丁')authorname='<img src="http://1.bp.blogspot.com/_yr4MQB4zDus/SZ4Mb30N0aI/AAAAAAAAFUg/3OGhwhzBUOg/S45/" style="float:left;margin-right: 5px;width:20px; height: 20px;display:block;" border="0" /> '+authorname;var uri='';if(typeof(post.author[0].uri)!='undefined'){uri=post.author[0].uri.$t;authorname='<a href="'+uri+'" target="_blank">'+authorname+'</a>'};var timestamp=post.published.$t.substr(0,10),y=timestamp.substr(0,4),m=timestamp.substr(5,2),d=timestamp.substr(8,2),layout_replace=layout.replace("%comment%",title_link).replace("%Y%",y).replace("%M%",m).replace("%D%",d).replace("%authorname%",authorname),odd=0;if(i%2==1)odd=1;temp+='<li class="guest-book-li guest-book-li-'+odd+'"><span class="item-title">'+layout_replace+'</span></li>'};var add_link='',rss_link='',reload_cmd='';if(firstPost!==null){link=firstPost.link[0].href;var parts=link.split('/'),blogID=parts[4],postID=parts[5],baseLink=firstPost.link[2].href,pos=baseLink.indexOf('.com/');baseLink=baseLink.substring(0,pos+5);rss_link=baseLink+'feeds/'+postID+'/comments/default';add_link='https://www.blogger.com/comment.g?blogID='+blogID+'&postID='+postID;reload_cmd="$.getScript('"+baseLink+"feeds/"+postID+"/comments/full?alt=json-in-script&callback=handleGuestbookPulipuli')"};if(post==sortentry[i]){link=add_link;temp+='<li class="guest-book-li readmore"><span class="item-title"><a href="'+link+'#comments" target="guestbook_write">閱讀全部的留言</a></span></li>'};temp+="</ul>";temp+='<div class="guestbook-write"> <a href="'+rss_link+'" style="float:right;"><img src="http://3.bp.blogspot.com/_yr4MQB4zDus/Ru35yvgloDI/AAAAAAAABOQ/bbtw-pQhpOk/s200/rss.gif" border="0" /></a> <a href="'+add_link+'" class="write" target="guestbook_write">撰寫留言</a> <a class="write" onclick="'+reload_cmd+'">重新讀取</a></div>';document.getElementById("pulipuli_guestbook").innerHTML=temp}
function openIframeDiv(thisObj){var div=jQuery(thisObj);if(div.hasClass("iframe-div")===false)div=div.parents(".iframe-div:first");var src=div.find(".src").attr("value"),frameborder=div.find(".frameborder").attr("value"),width=div.find(".width").attr("value"),height=div.find(".height").attr("value"),iframe=jQuery("<iframe></iframe>").insertAfter(div);div.remove();iframe.attr("src",src).attr("frameborder",frameborder).attr("width",width).attr("height",height)}
function getScript(url,callback){jQuery.ajax({url:url,dataType:'script',cache:true,success:callback})}
function blogAjax(){var doCallback=function(callback){if(typeof callback=="function")callback()};this.ajaxFunction=[];this.ajaxFunction.push(function(callback){var iframes,imgs,filterIframe=function(iframe){var src=iframe.attr("src"),width=iframe.attr("width"),height=iframe.attr("height"),frameborder=iframe.attr("frameborder"),link=src;if(link.length>50)link=link.substr(0,50)+"...";var iframeDiv=jQuery("<div><table onclick='openIframeDiv(this)'><tbody><tr><td valign='top'><img src='http://3.bp.blogspot.com/_yr4MQB4zDus/TA_RfdTE-TI/AAAAAAAAGw4/T1ewljZ9sSU/s320/stock_insert-floating-frame.png' /></td><td>請點此開啟內嵌網頁"+link+"</td></tr></tbody></table></div>").addClass("iframe-div").append("<input type='hidden' class='width' value='"+width+"' />").append("<input type='hidden' class='height' value='"+height+"' />").append("<input type='hidden' class='src' value='"+src+"' />").append("<input type='hidden' class='frameborder' value='"+frameborder+"' />").attr("onclick","openIframeDiv(this)").insertAfter(iframe);iframe.remove()},needle="?imgmax=800",filterImg=function(imgs){for(var i=0;i<imgs.length;i++){var img=imgs.eq(i),src=img.attr("src");if(typeof src=="undefined")continue;var len=src.length;if(src.substring(len-needle.length,len)==needle){src=src.substring(0,len-needle.length);img.attr("src",src)}}};if(PULI_UTILS.is_blogger_fullpage()===false){var entries=jQuery("div.blog-posts div.post .entry-content-text");for(var e=0;e<entries.length;e++){var element=jQuery("<div></div>").html(entries.eq(e).text());iframes=element.find("iframe");for(var i=0;i<iframes.length;i++){var iframe=iframes.eq(i);filterIframe(iframe)};imgs=element.find("img");filterImg(imgs);entries.eq(e).text(element.html())}}else{iframes=jQuery("div.post-body iframe");for(i=0;i<iframes.length;i++){iframe=iframes.eq(i);var src=iframe.attr("src");needle="http://www.facebook.com/plugins/like.php";if(src.substr(0,needle.length)===needle)continue;filterIframe(iframe)};imgs=jQuery("div.post-body img");filterImg(imgs)};doCallback(callback)});this.ajaxFunction.push(function(callback){$("#main .blog-posts .post-body img").lazyload({effect:"fadeIn",placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAABHNCSVQICAgIfAhkiAAAAA1JREFUCJljOHTo0H8AB9YDRlccwe4AAAAASUVORK5CYII%3D"});doCallback(callback)});this.ajaxFunction.push(function(callback){if(PULI_UTILS.is_blogger_fullpage()===false)$('#main-wrapper .main.section:first').infinitescroll({navSelector:"#main-wrapper:last div.blog-feeds, #main-wrapper:last div.blog-pager:last",nextSelector:"#main-wrapper:last .widget.Blog div.blog-pager:last a.blog-pager-older-link",itemSelector:"#main-wrapper .widget.Blog:first",loadingText:"下一頁讀取中……"},function(arrayOfNewElems){var elems=$(arrayOfNewElems);if(elems.find("a.blog-pager-older-link").length===0){$(window).unbind('.infscr');elems.find(".blog-pager").hide();return};elems.find(".status-msg-wrap").hide();elems.find(".blog-pager").hide()});doCallback(callback)});this.ajaxFunction.push(function(_callback){if(PULI_UTILS.is_blogger_fullpage()===true){PULI_UTILS.log('ajaxFunction','設置QR Code');PULI_UTILS.qrcode.setup()};setTimeout(_callback,1e3)});this.ajaxFunction.push(function(callback){if(is_blogger_search()===true||is_blogger_label()===true){doCallback(callback);return}else if(PULI_UTILS.is_blogger_fullpage()===false){PULI_UTILS.log('ajaxFunction','自動摘要');pBD=puliBloggerDigest();pBD.delayTime=500;pBD.wordMin=50;pBD.wordMax=100;pBD.langBlogURL="文章連結";pBD.langReadAll="閱讀全文";pBD.langContiReadAll="繼續閱讀";pBD.langShowDigest="顯示摘要";pBD.doDigest();setTimeout(function(){doCallback(callback)},500);return}else{doCallback(callback);return}});this.ajaxFunction.push(function(callback){if(PULI_UTILS.is_blogger_fullpage()){PULI_UTILS.log('ajaxFunction','網頁目錄');PULI_UTILS.post.toc()};doCallback(callback)});this.ajaxFunction.push(function(callback){var sidebarCtrl=jQuery("<div></div>").addClass("sidebar-controller"),arrowLeft=jQuery("<span onclick='sidebar_control(0)' > &lt; Side</span>").css("cursor","pointer").css("font-weight","bold").hover(function(){this.style.color="white"},function(){this.style.color="#CCCCCC"}),arrowRight=jQuery("<span onclick='sidebar_control(1)' >bar &gt; </span>").css("cursor","pointer").css("font-weight","bold").hover(function(){this.style.color="white"},function(){this.style.color="#CCCCCC"});sidebarCtrl.append(arrowLeft).append(arrowRight);jQuery("div.descriptionwrapper").prepend(sidebarCtrl);doCallback(callback)});this.ajaxFunction.push(function(callback){if(PULI_UTILS.is_blogger_fullpage()===true){var breadcrumbs=generateBreadcrumbs();if(breadcrumbs!=="")jQuery("h2.date-header:first").append(jQuery(breadcrumbs))};doCallback(callback)});this.ajaxFunction.push(function(callback){var widgets=jQuery("div#sidebar > div.widget"),button=jQuery("<div>-</div>").addClass("widget-toggle").attr("title","close").click(function(){var thisObj=jQuery(this),widget=thisObj.parents("div.widget:first").children("div.widget-content:first");if(thisObj.hasClass("closed")){widget.show();thisObj.removeClass("closed");thisObj.html("-");thisObj.attr("title","open")}else{widget.hide();thisObj.addClass("closed");thisObj.html("+");thisObj.attr("title","close")}}).hover(function(){jQuery(this).addClass("hover")},function(){jQuery(this).removeClass("hover")});for(var i=0;i<widgets.length;i++){var h2=widgets.eq(i).children("h2:first"),_title=$.trim(h2.html()),b=button.clone(true);h2.prepend(b);h2.addClass("toggle-setup");var _content_is_show=(h2.nextAll(".widget-content").css("display")=="none");if(_content_is_show)b.click()};doCallback(callback)});this.ajaxFunction.push(function(callback){if(is_blogger_search()===true||is_blogger_label()===true||is_blogger_archive()===true){doCallback(callback);return};var titles=jQuery("div#main h3.entry-title a");if(titles.length>0){getScript("http://s7.addthis.com/js/250/addthis_widget.js#username=pulipuli",function(){addthis_config={services_compact:'plurk,twitter,facebook,hemidemi,funp,delicious,digg,blogger,readitlater,evernote,googlebuzz,googlereader,igoogle,messenger,email,print'};for(var i=0;i<titles.length;i++){var url=titles.eq(i).attr("href"),title=titles.eq(i).html(),share=jQuery("<div></div>").addClass("share-buttons").insertBefore(titles.eq(i).parents("div.post:first").find("div.post-header-line-1")),addThis=jQuery('<div class="add-this"><a addthis:title="'+title+'" addthis:url="'+url+'" class="addthis_button"><img src="http://s7.addthis.com/static/btn/sm-share-en.gif" alt="分享並加入書籤" style="border:0"/></a></div>').appendTo(share)};doCallback(callback)})}else doCallback(callback)});this.ajaxFunction.push(function(callback){if(PULI_UTILS.is_blogger_fullpage()===false){getScript("http://pulipuli.blogspot.com/feeds/posts/summary/?alt=json-in-script&callback=handlePostspulipuli",function(){getScript("http://pulipuli.blogspot.com/feeds/comments/full?alt=json-in-script&callback=handleCommentspulipuli",function(){getScript('http://pulipuli.blogspot.com/feeds/113544406852218769/comments/full?alt=json-in-script&callback=handleGuestbookPulipuli',function(){doCallback(callback)})})})}else{setTimeout(function(){getScript("http://pulipuli.blogspot.com/feeds/posts/summary/?alt=json-in-script&callback=handlePostspulipuli",function(){getScript("http://pulipuli.blogspot.com/feeds/comments/full?alt=json-in-script&callback=handleCommentspulipuli",function(){getScript('http://pulipuli.blogspot.com/feeds/113544406852218769/comments/full?alt=json-in-script&callback=handleGuestbookPulipuli')})})},1e4);doCallback(callback)}});this.ajaxFunction.push(function(callback){PULI_UTILS.log('ajaxFunction','show plurk');if(is_blogger_search()===true||is_blogger_label()===true||is_blogger_archive()===true){doCallback(callback);return};var showPlurk=function(){var plurkdiv='<iframe src="http://www.plurk.com/getWidget?uid=1422855&h=200&w=200&u_info=2&bg=5A3818&tl=FFF7EF" width="200" frameborder="0" height="200" scrolling="no"></iframe>';jQuery("div#plurkDiv").hide().html(plurkdiv).attr("style","width: 200px; height: 200px; margin-bottom: 10px;").slideDown()};if(PULI_UTILS.is_blogger_fullpage()===true){setTimeout(showPlurk,10*1e3)}else showPlurk();doCallback(callback)});this.ajaxFunction.push(function(callback){PULI_UTILS.log('ajaxFunction','show linkwithin');if(PULI_UTILS.is_blogger_fullpage())jQuery(".post-body").addClass("show-linkwithin");doCallback(callback)});var blogAjaxExec=function(func,i){if(func.length===0)return;this.func=func.pop();this.func(function(){i++;setTimeout(function(){blogAjaxExec(func,i)},100)})};this.ajaxFunction.reverse();setTimeout(function(){blogAjaxExec(this.ajaxFunction,0)},0)};$(function(){blogAjax()});if(typeof PULI_UTILS=="undefined")PULI_UTILS={};if(typeof PULI_UTILS.post=="undefined")PULI_UTILS.post={};if(typeof(PULI_UTILS.is_blogger_fullpage)!='function')is_blogger_fullpage=function(){var href_array=location.href.split("/");if(href_array.length>5&&href_array[4]!=="label"&&href_array[0]!=="file:"){return true}else return false};if(typeof($.create_id)!='function')$.create_id=function(){return(new Date()).getTime()+''};PULI_UTILS.post.toc=function(cata_container,heading){var i,top;$(function(){if(typeof heading==="undefined")heading="h4";if(typeof cata_container=="undefined"){if($('div.post-body .disable-post-catalog').length>0)return;var firstHeading=$('div.post-body:first > '+heading+':first');if(firstHeading.length===0)return;var font=firstHeading.prev().filter('font');if(font.length>0)font.remove();var hr=firstHeading.prev().filter('hr');if(hr.length>0){hr.remove()}else{var div=firstHeading.prevAll("div:first");hr=div.children(':last').filter('hr');if(hr.length>0)hr.remove()};cata_container=$('<span></span>').hide().insertBefore(firstHeading);cata_container.attr('id','postcata'+$.create_id())};var cata=jQuery(cata_container),prefix=cata.attr("id"),postBody=jQuery(cata_container).parents("div.post-body:first");if(postBody.find('.cate-title').length>0)return;var headingAry=postBody.find("h4,h5"),headingTop=[],topId={};for(i=0;i<headingAry.length;i++){heading=headingAry.eq(i);top=heading.offset().top;topId[top]=heading;headingTop.push(top)};headingTop.sort(function(a,b){return a-b});headingAry=[];for(i=0;i<headingTop.length;i++){top=headingTop[i];heading=topId[top];headingAry.push(heading)};var cataTitleID=prefix+"cataTitle",cataTitle=jQuery("<div class='cata-title' style='width: 75%'><a name='"+cataTitleID+"' id='"+cataTitleID+"' /></div>"),goCata=jQuery('<a style="margin:0;padding:0;text-decoration:none;font-size:smaller;font-weight:normal;float:right;" href="#'+cataTitleID+'"><sup>&lt;^&gt;</sup></a>'),ulObj=jQuery("<ul></ul>");for(i=0;i<headingAry.length;i++){var hdObj=headingAry[i],title=hdObj.text(),anchorID=prefix+"_anchor"+i,anc=jQuery("<a id='"+anchorID+"' name='"+anchorID+"' />");hdObj.prepend(anc);hdObj.prepend(goCata.clone());var tagName=hdObj.attr('tagName').toLowerCase(),hd=jQuery("<li><a href='#"+anchorID+"'>"+title+"</a></li>");if(tagName=='h4'){ulObj.append(hd)}else{var lastHd=ulObj.children('li:last');if(lastHd.length===0)lastHd=$('<li></li>').appendTo(ulObj);var lastUl=lastHd.children("ul:last");if(lastUl.length===0)lastUl=$('<ul></ul>').appendTo(lastHd);lastUl.append(hd)}};if(headingAry.length!==0){cata_container.append(cataTitle).append(ulObj).slideDown();cata_container.prepend("<hr width='75%' />");cata_container.append("<hr width='75%' />")}})};function puliBloggerDigest(delayTime,wordMin,wordMax,langBlogURL,langReadAll,langContiReadAll,langShowDigest){var pBD=this;pBD.setDefaultValue=function(v,defaultValue){if(typeof v=="undefined"){return defaultValue}else return v};pBD.wordMin=pBD.setDefaultValue(wordMin,100);pBD.wordMax=pBD.setDefaultValue(wordMax,200);pBD.langBlogURL=pBD.setDefaultValue(langBlogURL,"文章網頁");pBD.langReadAll=pBD.setDefaultValue(langReadAll,"閱讀全文");pBD.langContiReadAll=pBD.setDefaultValue(langContiReadAll,"繼續閱讀全文");pBD.langShowDigest=pBD.setDefaultValue(langShowDigest,"僅顯示摘要");pBD.delayTime=pBD.setDefaultValue(delayTime,0);pBD.stop_tag=[];pBD.stop_tag[0]="img";pBD.stop_tag[1]="br";pBD.stop_chr=[];pBD.stop_chr[0]=" ";pBD.stop_chr[1]="\n";pBD.stop_chr[2]="\t";pBD.stop_chr[3]=">";pBD.stop_chr[4]="<";pBD.skip_tag=[];pBD.skip_tag[0]="script";pBD.skip_tag[1]="style";pBD.limit=null;pBD.doDegiest=function(callback){pBD.doDigest(callback)};pBD.doDigest=function(callback){if(PULI_UTILS.is_blogger_fullpage()===true){if(typeof callback=="function")callback();return};var postBody=jQuery("div.post-body");if(postBody.length===0)postBody=jQuery("div.post div.entry");if(postBody.length===0){var divPost=jQuery("div.post");for(var i=0;i<divPost.length;i++){var post=divPost.eq(i).children(":not(a:first, h3.post-title:first, p.post-footer, :first):first");post.css("border","1px solid red");postBody=jQuery('<div class="post-body"></div>').append(post);divPost.eq(i).children("h3.post-title:first").after(postBody)};postBody=jQuery("div.post-body")};var postTitleURL=jQuery("div.post").find("a[title='permanent link']");if(postTitleURL.length===0){postTitleURL=jQuery("div.post").find("a.comment-link:last");if(postTitleURL.length===0)postTitleURL=null};if(postBody.find("textarea.entry-content-text:first").length>0)postBody.hide();var loop=function(pb,i){var pbObj=postBody.eq(i),url='';if(postTitleURL!==null&&typeof postTitleURL.eq(i).hasAttr=='function'&&postTitleURL.eq(i).hasAttr("href")){url=postTitleURL.eq(i).attr("href");url=url.replace("#links","")};pBD.digest_blogbody(pbObj,url,i,function(){i++;if(i<pb.length){setTimeout(function(){loop(pb,i)},0)}else if(typeof callback=="function")callback()})};loop(postBody,0)};pBD.digest_blogbody=function(pbObj,url,eq,callback){var returnCallback=function(){pbObj.slideDown("fast",function(){if(typeof callback=="function")callback();return})},word_min=pBD.wordMin,word_max=pBD.wordMax;if(PULI_UTILS.is_blogger_fullpage()){returnCallback();return};var textarea=pbObj.find("textarea.entry-content-text:first");if(textarea.length===1){var text=textarea.text();textarea.remove();pbObj.html(text)}else if(textarea.length===0)return;blogitembody=pbObj.html();id="postBodyAnchor"+eq;this.id=id;this.url=url;this.contiReading=function(title,msgContiReading){return'<div class="link_fullpost" style="margin: 5px;margin-bottom: 1em;">| <a onclick="pBD.digest_show(\''+this.id+'\')" title="'+title+'" href="javascript:void(0);">'+msgContiReading+'</a> | <a href="'+this.url+'" title="post link">'+pBD.langBlogURL+'</a> |</div>'};var digest_point=-1,digest_mode="auto";if(digest_mode=="auto"){digest_point=blogitembody.indexOf("<!--Hidden All-->",0);if(digest_point!=-1||pbObj.find("span.digest-mode.hidden-all").length!==0){digest_point=0;digest_mode="hidden_all"}};if(digest_mode=="auto"){digest_point=blogitembody.indexOf("<!--Show All-->",0);if(digest_point!=-1||pbObj.find("span.digest-mode.show-all").length!==0){digest_point=blogitembody.length;digest_mode="show_all"}};if(digest_mode=="auto"){digest_point=blogitembody.indexOf("<!--Digest-->",0);digest_point2=blogitembody.indexOf("<!--more-->",0);digest_point3=blogitembody.indexOf(">DIGEST<",0);digest_point4=blogitembody.indexOf("<!-- Digest -->",0);if(digest_point!=-1){digest_point=digest_point+13;digest_mode="digest"};if(digest_point2!=-1&&digest_point2>digest_point){digest_point=digest_point2+11;digest_mode="digest"};if(digest_point3!=-1&&digest_point3>digest_point2){digest_point=digest_point3+2;digest_mode="digest"};if(digest_point4!=-1&&digest_point4>digest_point3){digest_point=digest_point3+15;digest_mode="digest"}};if(digest_mode!="auto"){var body_len;if(blogitembody.toLowerCase().substr(blogitembody.length-56,56)=='<div style="clear:both; padding-bottom: 0.25em;"></div>'){body_len=blogitembody.length-56}else body_len=blogitembody.length;if(digest_point<body_len&&digest_point!=-1){if(digest_mode!="hidden_all"||digest_mode!="digest"){continue_reading1="……"}else continue_reading1="";if(digest_mode=="hidden_all"){continue_reading2=this.contiReading("show all",pBD.langReadAll)}else if(digest_mode=="digest")continue_reading2=this.contiReading("show all",pBD.langContiReadAll);hidden_reading=this.contiReading("show only digest",pBD.langShowDigest);blogitembody_digest_ohter=blogitembody.substr(0,digest_point)+'<a id="'+id+'-digest_point" name="'+id+'-digest_point"></a>'+blogitembody.substr(digest_point,blogitembody.length-digest_point);blogitembody_digest_ohter='<div class="post_hidden puli-blogger-digest" id="'+id+'-hidden" style="display:none;clear:both">'+blogitembody_digest_ohter+hidden_reading+'</div>'}else{continue_reading1="";continue_reading2="";blogitembody_digest_ohter=""};var end_tag="";if(digest_mode=="digest"){text=blogitembody.substr(0,digest_point);each_tag=text.split("<");for(var i=1;i<each_tag.length;i++){if(each_tag[i].substr(0,1)=="/"||each_tag[i].substr(0,1)=="!")continue;temp=each_tag[i].split(" ",2);temp2=each_tag[i].split(">",2);if(temp[0].length<temp2[0].length){tag=temp[0]}else tag=temp2[0];end_tag="</"+tag+">"+end_tag}};blogitembody_digest=blogitembody.substr(0,digest_point)+continue_reading1+end_tag;pbObj.html('<div name="'+id+'-show" id="'+id+'-show" class="post_show puli-blogger-digest" style="clear:both;">'+blogitembody_digest+continue_reading2+'</div>').after(blogitembody_digest_ohter);returnCallback();return};if(pbObj.text().length<word_max){returnCallback();return};if(blogitembody.length<word_max){returnCallback();return};var word_num=0,words="",tags=[];tag_i=0;var dp=0,stop_tag=pBD.stop_tag,no_save="false",stop_chr=pBD.stop_chr,chr_no_save="false",skip_tag=pBD.skip_tag,temp_str="",now_chr="",interval=1,process=function(blogitembody,i,digest_point){if(!(i<blogitembody.length&&digest_point==-1)){ending(i,tags);return};now_chr=blogitembody.substr(i,1);if(now_chr=="<"){is_skip_tag="false";for(sk_i=0;sk_i<skip_tag.length;sk_i++){temp_str=blogitembody.substr(parseInt(i+1,10),skip_tag[sk_i].length);if(temp_str==skip_tag[sk_i]){i=blogitembody.indexOf("</"+skip_tag[sk_i]+">",i);i=parseInt(i,10)+skip_tag[sk_i].length+3;is_skip_tag="true";break}};if(is_skip_tag=="true"){i++;setTimeout(function(){process(blogitembody,i,digest_point)},interval);return};tagname_point1=blogitembody.indexOf(" ",i);tagname_point2=blogitembody.indexOf(">",i);if(tagname_point2<tagname_point1||tagname_point1==-1){tagname_point=tagname_point2}else tagname_point=tagname_point1;tagname=blogitembody.substr(parseInt(i+1,10),tagname_point-parseInt(i+1,10));no_save="false";for(st_i=0;st_i<stop_tag;st_i++)if(tagname==stop_tag[st_i]){no_save="true";break};if(no_save=="false"){tags[tag_i]=tagname;tag_i++};i=blogitembody.indexOf(">",parseInt(i,10));i++;setTimeout(function(){process(blogitembody,i,digest_point)},interval);return};chr_no_save="false";for(sc_i=0;sc_i<stop_chr.length;sc_i++)if(now_chr==stop_chr[sc_i]){chr_no_save="true";break};if(chr_no_save=="false"&&now_chr!="<")word_num++;if(word_num>word_max+tags.length){ending(i,tags);return}else{i++;setTimeout(function(){process(blogitembody,i,digest_point)},interval);return}},ending=function(i,tags){digest_point=parseInt(i+1,10);var temp_dp=blogitembody.indexOf("</",digest_point);if(temp_dp-digest_point<word_min&&temp_dp!=-1)digest_point=temp_dp;end_tag="";for(i=(tag_i-1);i>-1;i--)if(typeof(tags[i])!='undefined'&&tags[i].substr(0,1)!="/")end_tag=end_tag+'</'+tags[i]+'>';var body_len;if(blogitembody.toLowerCase().substr(blogitembody.length-56,56)=='<div style="clear:both; padding-bottom: 0.25em;"></div>'){body_len=blogitembody.length-(tag_i*5)-56}else body_len=blogitembody.length-(tag_i*5);if(digest_point<body_len&&digest_point!=-1){continue_reading1="……";continue_reading2=this.contiReading("show all",pBD.langContiReadAll);hidden_reading=this.contiReading("show only digest",pBD.langShowDigest);blogitembody_digest_ohter=blogitembody.substr(0,digest_point)+'<a id="'+id+'-digest_point" name="'+id+'-digest_point"></a>'+blogitembody.substr(digest_point,blogitembody.length-digest_point);blogitembody_digest_ohter='<div class="post_hidden puli-blogger-digest" id="'+id+'-hidden" style="display:none;clear:both;">'+"<textarea class='post_hidden text'>"+blogitembody_digest_ohter+"</textarea>"+hidden_reading+'</div>'}else{continue_reading1="";continue_reading2="";blogitembody_digest_ohter=''};blogitembody_digest=blogitembody.substr(0,digest_point)+continue_reading1+end_tag;var postShow=jQuery('<div class="post_show puli-blogger-digest" name="'+id+'-show" id="'+id+'-show" style="clear:both;"></div>').append(blogitembody_digest).append(continue_reading2);postShow.find("script").remove();pbObj.html(postShow);if(!(blogitembody_digest_ohter===""||typeof blogitembody_digest_ohter=="undefined")){var postHidden=jQuery(blogitembody_digest_ohter);pbObj.append(postHidden)};returnCallback();return};process(blogitembody,0,digest_point)};pBD.digest_show=function(id){if(document.getElementById(id+"-show").style.display===""||document.getElementById(id+"-show").style.display=="block"){jQuery("#"+id+"-show").hide();var hidden=jQuery("#"+id+"-hidden"),textarea=hidden.children("textarea.post_hidden.text");if(textarea.length==1){var text=textarea.text();textarea.remove();hidden.prepend(jQuery("<div>"+text+"</div>"))};hidden.show()}else{jQuery("#"+id+"-hidden").hide();jQuery("#"+id+"-show").show();document.getElementById(id+"-show").parentNode.parentNode.scrollIntoView(true)};return false};pBD.is_blogger_fullpage=function(){var href_array=location.href.split("/");if(href_array.length>5&&href_array[4]!="label"&&href_array[0]!="file:"){return true}else return false};return pBD};(function($){$.fn.qrcode=function(options){var _title;if(options===undefined){_title=null;if($('head title').length>0)_title=$('head title').text();options={title:_title,text:location.href}};if(typeof options==='string')options={text:options};options=$.extend({},{title_max:null,title_width:null,render:"canvas",width:256,height:256,typeNumber:-1,correctLevel:QRErrorCorrectLevel.H,background:"#ffffff",foreground:"#000000"},options);if(options.text===undefined)options.text=location.href;if(options.title===undefined){if(typeof options.text=='string'&&options.text.substr(0,3)=='<a '){var _a=$(options.text);if(_a.hasAttr('href')){options.title=_a.text();options.text=_a.attr('href')}};if(options.title===undefined)options.title=$('head title').text()};if(options.title_max!==null&&options.title_max!==undefined&&options.title!==null&&options.title!==undefined&&options.title.length>options.title_max)options.title=options.title.substr(0,options.title_max)+'...';var createCanvas=function(){var qrcode=new QRCode(options.typeNumber,options.correctLevel);qrcode.addData(options.text);qrcode.make();var canvas=document.createElement('canvas');canvas.width=options.width;canvas.height=options.height;var ctx=canvas.getContext('2d'),tileW=options.width/qrcode.getModuleCount(),tileH=options.height/qrcode.getModuleCount();for(var row=0;row<qrcode.getModuleCount();row++)for(var col=0;col<qrcode.getModuleCount();col++){ctx.fillStyle=qrcode.isDark(row,col)?options.foreground:options.background;var w=(Math.ceil((col+1)*tileW)-Math.floor(col*tileW)),h=(Math.ceil((row+1)*tileW)-Math.floor(row*tileW));ctx.fillRect(Math.round(col*tileW),Math.round(row*tileH),w,h)};return canvas},createTable=function(){var qrcode=new QRCode(options.typeNumber,options.correctLevel);qrcode.addData(options.text);qrcode.make();var $table=$('<table></table>').css("width",options.width+"px").css("height",options.height+"px").css("border","0px").css("border-collapse","collapse").css('background-color',options.background),tileW=options.width/qrcode.getModuleCount(),tileH=options.height/qrcode.getModuleCount();for(var row=0;row<qrcode.getModuleCount();row++){var $row=$('<tr></tr>').css('height',tileH+"px").appendTo($table);for(var col=0;col<qrcode.getModuleCount();col++)$('<td></td>').css('width',tileW+"px").css('background-color',qrcode.isDark(row,col)?options.foreground:options.background).appendTo($row)};return $table},_title_display=options.title;_title_display='<a href="'+options.text+'">'+options.title+'</a>';var _title_width=options.title_width;if(_title_width===null)_title_width=options.width;return this.each(function(){var element=options.render=="canvas"?createCanvas():createTable();$(element).appendTo(this);if(options.title!==null&&options.title!==''){var $title=$('<div class="title" style="width:'+_title_width+'px;">'+_title_display+'</div>');$title.appendTo(this)}})}})(jQuery);function QR8bitByte(data){this.mode=QRMode.MODE_8BIT_BYTE;this.data=data};QR8bitByte.prototype={getLength:function(buffer){return this.data.length},write:function(buffer){for(var i=0;i<this.data.length;i++)buffer.put(this.data.charCodeAt(i),8)}}
function QRCode(typeNumber,errorCorrectLevel){this.typeNumber=typeNumber;this.errorCorrectLevel=errorCorrectLevel;this.modules=null;this.moduleCount=0;this.dataCache=null;this.dataList=new Array()};QRCode.prototype={addData:function(data){var newData=new QR8bitByte(data);this.dataList.push(newData);this.dataCache=null},isDark:function(row,col){if(row<0||this.moduleCount<=row||col<0||this.moduleCount<=col)throw new Error(row+","+col);return this.modules[row][col]},getModuleCount:function(){return this.moduleCount},make:function(){if(this.typeNumber<1){var typeNumber=1;for(typeNumber=1;typeNumber<40;typeNumber++){var rsBlocks=QRRSBlock.getRSBlocks(typeNumber,this.errorCorrectLevel),buffer=new QRBitBuffer(),totalDataCount=0;for(var i=0;i<rsBlocks.length;i++)totalDataCount+=rsBlocks[i].dataCount;for(var i=0;i<this.dataList.length;i++){var data=this.dataList[i];buffer.put(data.mode,4);buffer.put(data.getLength(),QRUtil.getLengthInBits(data.mode,typeNumber));data.write(buffer)};if(buffer.getLengthInBits()<=totalDataCount*8)break};this.typeNumber=typeNumber};this.makeImpl(false,this.getBestMaskPattern())},makeImpl:function(test,maskPattern){this.moduleCount=this.typeNumber*4+17;this.modules=new Array(this.moduleCount);for(var row=0;row<this.moduleCount;row++){this.modules[row]=new Array(this.moduleCount);for(var col=0;col<this.moduleCount;col++)this.modules[row][col]=null};this.setupPositionProbePattern(0,0);this.setupPositionProbePattern(this.moduleCount-7,0);this.setupPositionProbePattern(0,this.moduleCount-7);this.setupPositionAdjustPattern();this.setupTimingPattern();this.setupTypeInfo(test,maskPattern);if(this.typeNumber>=7)this.setupTypeNumber(test);if(this.dataCache==null)this.dataCache=QRCode.createData(this.typeNumber,this.errorCorrectLevel,this.dataList);this.mapData(this.dataCache,maskPattern)},setupPositionProbePattern:function(row,col){for(var r=-1;r<=7;r++){if(row+r<=-1||this.moduleCount<=row+r)continue;for(var c=-1;c<=7;c++){if(col+c<=-1||this.moduleCount<=col+c)continue;if((0<=r&&r<=6&&(c==0||c==6))||(0<=c&&c<=6&&(r==0||r==6))||(2<=r&&r<=4&&2<=c&&c<=4)){this.modules[row+r][col+c]=true}else this.modules[row+r][col+c]=false}}},getBestMaskPattern:function(){var minLostPoint=0,pattern=0;for(var i=0;i<8;i++){this.makeImpl(true,i);var lostPoint=QRUtil.getLostPoint(this);if(i==0||minLostPoint>lostPoint){minLostPoint=lostPoint;pattern=i}};return pattern},createMovieClip:function(target_mc,instance_name,depth){var qr_mc=target_mc.createEmptyMovieClip(instance_name,depth),cs=1;this.make();for(var row=0;row<this.modules.length;row++){var y=row*cs;for(var col=0;col<this.modules[row].length;col++){var x=col*cs,dark=this.modules[row][col];if(dark){qr_mc.beginFill(0,100);qr_mc.moveTo(x,y);qr_mc.lineTo(x+cs,y);qr_mc.lineTo(x+cs,y+cs);qr_mc.lineTo(x,y+cs);qr_mc.endFill()}}};return qr_mc},setupTimingPattern:function(){for(var r=8;r<this.moduleCount-8;r++){if(this.modules[r][6]!=null)continue;this.modules[r][6]=(r%2==0)};for(var c=8;c<this.moduleCount-8;c++){if(this.modules[6][c]!=null)continue;this.modules[6][c]=(c%2==0)}},setupPositionAdjustPattern:function(){var pos=QRUtil.getPatternPosition(this.typeNumber);for(var i=0;i<pos.length;i++)for(var j=0;j<pos.length;j++){var row=pos[i],col=pos[j];if(this.modules[row][col]!=null)continue;for(var r=-2;r<=2;r++)for(var c=-2;c<=2;c++)if(r==-2||r==2||c==-2||c==2||(r==0&&c==0)){this.modules[row+r][col+c]=true}else this.modules[row+r][col+c]=false}},setupTypeNumber:function(test){var bits=QRUtil.getBCHTypeNumber(this.typeNumber);for(var i=0;i<18;i++){var mod=(!test&&((bits>>i)&1)==1);this.modules[Math.floor(i/3)][i%3+this.moduleCount-8-3]=mod};for(var i=0;i<18;i++){var mod=(!test&&((bits>>i)&1)==1);this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=mod}},setupTypeInfo:function(test,maskPattern){var data=(this.errorCorrectLevel<<3)|maskPattern,bits=QRUtil.getBCHTypeInfo(data);for(var i=0;i<15;i++){var mod=(!test&&((bits>>i)&1)==1);if(i<6){this.modules[i][8]=mod}else if(i<8){this.modules[i+1][8]=mod}else this.modules[this.moduleCount-15+i][8]=mod};for(var i=0;i<15;i++){var mod=(!test&&((bits>>i)&1)==1);if(i<8){this.modules[8][this.moduleCount-i-1]=mod}else if(i<9){this.modules[8][15-i-1+1]=mod}else this.modules[8][15-i-1]=mod};this.modules[this.moduleCount-8][8]=(!test)},mapData:function(data,maskPattern){var inc=-1,row=this.moduleCount-1,bitIndex=7,byteIndex=0;for(var col=this.moduleCount-1;col>0;col-=2){if(col==6)col--;while(true){for(var c=0;c<2;c++)if(this.modules[row][col-c]==null){var dark=false;if(byteIndex<data.length)dark=(((data[byteIndex]>>>bitIndex)&1)==1);var mask=QRUtil.getMask(maskPattern,row,col-c);if(mask)dark=!dark;this.modules[row][col-c]=dark;bitIndex--;if(bitIndex==-1){byteIndex++;bitIndex=7}};row+=inc;if(row<0||this.moduleCount<=row){row-=inc;inc=-inc;break}}}}};QRCode.PAD0=0xEC;QRCode.PAD1=0x11;QRCode.createData=function(typeNumber,errorCorrectLevel,dataList){var rsBlocks=QRRSBlock.getRSBlocks(typeNumber,errorCorrectLevel),buffer=new QRBitBuffer();for(var i=0;i<dataList.length;i++){var data=dataList[i];buffer.put(data.mode,4);buffer.put(data.getLength(),QRUtil.getLengthInBits(data.mode,typeNumber));data.write(buffer)};var totalDataCount=0;for(var i=0;i<rsBlocks.length;i++)totalDataCount+=rsBlocks[i].dataCount;if(buffer.getLengthInBits()>totalDataCount*8)throw new Error("code length overflow. ("+buffer.getLengthInBits()+">"+totalDataCount*8+")");if(buffer.getLengthInBits()+4<=totalDataCount*8)buffer.put(0,4);while(buffer.getLengthInBits()%8!=0)buffer.putBit(false);while(true){if(buffer.getLengthInBits()>=totalDataCount*8)break;buffer.put(QRCode.PAD0,8);if(buffer.getLengthInBits()>=totalDataCount*8)break;buffer.put(QRCode.PAD1,8)};return QRCode.createBytes(buffer,rsBlocks)};QRCode.createBytes=function(buffer,rsBlocks){var offset=0,maxDcCount=0,maxEcCount=0,dcdata=new Array(rsBlocks.length),ecdata=new Array(rsBlocks.length);for(var r=0;r<rsBlocks.length;r++){var dcCount=rsBlocks[r].dataCount,ecCount=rsBlocks[r].totalCount-dcCount;maxDcCount=Math.max(maxDcCount,dcCount);maxEcCount=Math.max(maxEcCount,ecCount);dcdata[r]=new Array(dcCount);for(var i=0;i<dcdata[r].length;i++)dcdata[r][i]=0xff&buffer.buffer[i+offset];offset+=dcCount;var rsPoly=QRUtil.getErrorCorrectPolynomial(ecCount),rawPoly=new QRPolynomial(dcdata[r],rsPoly.getLength()-1),modPoly=rawPoly.mod(rsPoly);ecdata[r]=new Array(rsPoly.getLength()-1);for(var i=0;i<ecdata[r].length;i++){var modIndex=i+modPoly.getLength()-ecdata[r].length;ecdata[r][i]=(modIndex>=0)?modPoly.get(modIndex):0}};var totalCodeCount=0;for(var i=0;i<rsBlocks.length;i++)totalCodeCount+=rsBlocks[i].totalCount;var data=new Array(totalCodeCount),index=0;for(var i=0;i<maxDcCount;i++)for(var r=0;r<rsBlocks.length;r++)if(i<dcdata[r].length)data[index++]=dcdata[r][i];for(var i=0;i<maxEcCount;i++)for(var r=0;r<rsBlocks.length;r++)if(i<ecdata[r].length)data[index++]=ecdata[r][i];return data};var QRMode={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3},QRErrorCorrectLevel={L:1,M:0,Q:3,H:2},QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},QRUtil={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:(1<<10)|(1<<8)|(1<<5)|(1<<4)|(1<<2)|(1<<1)|(1<<0),G18:(1<<12)|(1<<11)|(1<<10)|(1<<9)|(1<<8)|(1<<5)|(1<<2)|(1<<0),G15_MASK:(1<<14)|(1<<12)|(1<<10)|(1<<4)|(1<<1),getBCHTypeInfo:function(data){var d=data<<10;while(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G15)>=0)d^=(QRUtil.G15<<(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G15)));return((data<<10)|d)^QRUtil.G15_MASK},getBCHTypeNumber:function(data){var d=data<<12;while(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G18)>=0)d^=(QRUtil.G18<<(QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G18)));return(data<<12)|d},getBCHDigit:function(data){var digit=0;while(data!=0){digit++;data>>>=1};return digit},getPatternPosition:function(typeNumber){return QRUtil.PATTERN_POSITION_TABLE[typeNumber-1]},getMask:function(maskPattern,i,j){switch(maskPattern){case QRMaskPattern.PATTERN000:return(i+j)%2==0;case QRMaskPattern.PATTERN001:return i%2==0;case QRMaskPattern.PATTERN010:return j%3==0;case QRMaskPattern.PATTERN011:return(i+j)%3==0;case QRMaskPattern.PATTERN100:return(Math.floor(i/2)+Math.floor(j/3))%2==0;case QRMaskPattern.PATTERN101:return(i*j)%2+(i*j)%3==0;case QRMaskPattern.PATTERN110:return((i*j)%2+(i*j)%3)%2==0;case QRMaskPattern.PATTERN111:return((i*j)%3+(i+j)%2)%2==0;default:throw new Error("bad maskPattern:"+maskPattern)}},getErrorCorrectPolynomial:function(errorCorrectLength){var a=new QRPolynomial([1],0);for(var i=0;i<errorCorrectLength;i++)a=a.multiply(new QRPolynomial([1,QRMath.gexp(i)],0));return a},getLengthInBits:function(mode,type){if(1<=type&&type<10){switch(mode){case QRMode.MODE_NUMBER:return 10;case QRMode.MODE_ALPHA_NUM:return 9;case QRMode.MODE_8BIT_BYTE:return 8;case QRMode.MODE_KANJI:return 8;default:throw new Error("mode:"+mode)}}else if(type<27){switch(mode){case QRMode.MODE_NUMBER:return 12;case QRMode.MODE_ALPHA_NUM:return 11;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 10;default:throw new Error("mode:"+mode)}}else if(type<41){switch(mode){case QRMode.MODE_NUMBER:return 14;case QRMode.MODE_ALPHA_NUM:return 13;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 12;default:throw new Error("mode:"+mode)}}else throw new Error("type:"+type)},getLostPoint:function(qrCode){var moduleCount=qrCode.getModuleCount(),lostPoint=0;for(var row=0;row<moduleCount;row++)for(var col=0;col<moduleCount;col++){var sameCount=0,dark=qrCode.isDark(row,col);for(var r=-1;r<=1;r++){if(row+r<0||moduleCount<=row+r)continue;for(var c=-1;c<=1;c++){if(col+c<0||moduleCount<=col+c)continue;if(r==0&&c==0)continue;if(dark==qrCode.isDark(row+r,col+c))sameCount++}};if(sameCount>5)lostPoint+=(3+sameCount-5)};for(var row=0;row<moduleCount-1;row++)for(var col=0;col<moduleCount-1;col++){var count=0;if(qrCode.isDark(row,col))count++;if(qrCode.isDark(row+1,col))count++;if(qrCode.isDark(row,col+1))count++;if(qrCode.isDark(row+1,col+1))count++;if(count==0||count==4)lostPoint+=3};for(var row=0;row<moduleCount;row++)for(var col=0;col<moduleCount-6;col++)if(qrCode.isDark(row,col)&&!qrCode.isDark(row,col+1)&&qrCode.isDark(row,col+2)&&qrCode.isDark(row,col+3)&&qrCode.isDark(row,col+4)&&!qrCode.isDark(row,col+5)&&qrCode.isDark(row,col+6))lostPoint+=40;for(var col=0;col<moduleCount;col++)for(var row=0;row<moduleCount-6;row++)if(qrCode.isDark(row,col)&&!qrCode.isDark(row+1,col)&&qrCode.isDark(row+2,col)&&qrCode.isDark(row+3,col)&&qrCode.isDark(row+4,col)&&!qrCode.isDark(row+5,col)&&qrCode.isDark(row+6,col))lostPoint+=40;var darkCount=0;for(var col=0;col<moduleCount;col++)for(var row=0;row<moduleCount;row++)if(qrCode.isDark(row,col))darkCount++;var ratio=Math.abs(100*darkCount/moduleCount/moduleCount-50)/5;lostPoint+=ratio*10;return lostPoint}},QRMath={glog:function(n){if(n<1)throw new Error("glog("+n+")");return QRMath.LOG_TABLE[n]},gexp:function(n){while(n<0)n+=255;while(n>=256)n-=255;return QRMath.EXP_TABLE[n]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var i=0;i<8;i++)QRMath.EXP_TABLE[i]=1<<i;for(var i=8;i<256;i++)QRMath.EXP_TABLE[i]=QRMath.EXP_TABLE[i-4]^QRMath.EXP_TABLE[i-5]^QRMath.EXP_TABLE[i-6]^QRMath.EXP_TABLE[i-8];for(var i=0;i<255;i++)QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]]=i
function QRPolynomial(num,shift){if(num.length==undefined)throw new Error(num.length+"/"+shift);var offset=0;while(offset<num.length&&num[offset]==0)offset++;this.num=new Array(num.length-offset+shift);for(var i=0;i<num.length-offset;i++)this.num[i]=num[i+offset]};QRPolynomial.prototype={get:function(index){return this.num[index]},getLength:function(){return this.num.length},multiply:function(e){var num=new Array(this.getLength()+e.getLength()-1);for(var i=0;i<this.getLength();i++)for(var j=0;j<e.getLength();j++)num[i+j]^=QRMath.gexp(QRMath.glog(this.get(i))+QRMath.glog(e.get(j)));return new QRPolynomial(num,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;var ratio=QRMath.glog(this.get(0))-QRMath.glog(e.get(0)),num=new Array(this.getLength());for(var i=0;i<this.getLength();i++)num[i]=this.get(i);for(var i=0;i<e.getLength();i++)num[i]^=QRMath.gexp(QRMath.glog(e.get(i))+ratio);return new QRPolynomial(num,0).mod(e)}}
function QRRSBlock(totalCount,dataCount){this.totalCount=totalCount;this.dataCount=dataCount};QRRSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];QRRSBlock.getRSBlocks=function(typeNumber,errorCorrectLevel){var rsBlock=QRRSBlock.getRsBlockTable(typeNumber,errorCorrectLevel);if(rsBlock==undefined)throw new Error("bad rs block @ typeNumber:"+typeNumber+"/errorCorrectLevel:"+errorCorrectLevel);var length=rsBlock.length/3,list=new Array();for(var i=0;i<length;i++){var count=rsBlock[i*3+0],totalCount=rsBlock[i*3+1],dataCount=rsBlock[i*3+2];for(var j=0;j<count;j++)list.push(new QRRSBlock(totalCount,dataCount))};return list};QRRSBlock.getRsBlockTable=function(typeNumber,errorCorrectLevel){switch(errorCorrectLevel){case QRErrorCorrectLevel.L:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+0];case QRErrorCorrectLevel.M:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+1];case QRErrorCorrectLevel.Q:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+2];case QRErrorCorrectLevel.H:return QRRSBlock.RS_BLOCK_TABLE[(typeNumber-1)*4+3];default:return undefined}}
function QRBitBuffer(){this.buffer=new Array();this.length=0};QRBitBuffer.prototype={get:function(index){var bufIndex=Math.floor(index/8);return((this.buffer[bufIndex]>>>(7-index%8))&1)==1},put:function(num,length){for(var i=0;i<length;i++)this.putBit(((num>>>(length-i-1))&1)==1)},getLengthInBits:function(){return this.length},putBit:function(bit){var bufIndex=Math.floor(this.length/8);if(this.buffer.length<=bufIndex)this.buffer.push(0);if(bit)this.buffer[bufIndex]|=(0x80>>>(this.length%8));this.length++}};if(typeof PULI_UTILS=="undefined")PULI_UTILS={};PULI_UTILS.qrcode={setup:function(_options){if(_options===undefined)_options={};_options=$.extend({},{container:'.post.hentry',width:80,height:80,title_width:"auto",footer:"布丁布丁吃什麼？ <img src='http://pulipuli.blogspot.tw/favicon.ico' /> <br /> <a class='link' href='http://pulipuli.blgospot.tw/'>http://pulipuli.blogspot.tw/</a>"},_options);var _containers=$(_options.container),_setup=function(_container){var _a=_container.find('h3:first a:first'),_h3=_container.find('h3:first');if(_a.length>0){_options.text=_a.attr("href");_options.title=_a.text()}else if(_h3.length>0)_options.title=_h3.text();var _qrcode_div=$('<div></div>').addClass('qrcode').appendTo(_container);_qrcode_div.qrcode(_options);var _footer=$('<div></div>').html(_options.footer).addClass('footer').appendTo(_qrcode_div)};if(_containers.length>1){_containers.each(function(_i,_container){_container=$(_container);_setup(_container)})}else if(_containers.length==1)_setup(_containers)}};